id: ${{ values.workflowId }}
version: '${{ values.version}}'
specVersion: '0.8'
name: '${{ values.workflowId }}'
description: '${{ values.description }}'
annotations:
  - "workflow-type/assessment"
dataInputSchema:
  failOnValidationErrors: true
  schema: schemas/${{ values.artifactId }}-input-schema.json
start: StartState
extensions:
  - extensionid: ${{ values.artifactId }}-output-schema
    outputSchema: schema/${{ values.artifactId }}-workflow-options-output-schema.json
functions:
  - name: execute
    type: custom
    operation: "service:java:${{ values.groupId }}.${{ values.artifactId }}.DefaultAssessment::execute"
  - name: logOuput
    type: custom
    operation: "sysout:INFO"
  - name: preCheck
    operation: "specs/${{ values.artifactId }}-precheck.yaml#createResource_preCheck"
states:
  - name: StartState
    type: operation
    stateDataFilter:
      output: '. +={workflowOptions: .preCheck.workflowdata.validatedResult}'
    actions:
      - name: executeAction
        functionRef:
          refName: execute
          arguments:
            userInput: ".userInput"
        actionDataFilter:
          toStateData: ".result"
      - name: preCheck
        functionRef:
          refName: preCheck
          arguments:
            workflowdata:
              result: .
        actionDataFilter:
            fromStateData: .result
            toStateData: ".preCheck"
      - name: printAction
        functionRef:
          refName: logOuput
          arguments:
            message: ".preCheck"
    end: true